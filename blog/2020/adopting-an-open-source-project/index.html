<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Adopting an Open Source Software project | Carlos A. Morales</title> <meta name="author" content="Carlos A. Morales"/> <meta name="description" content="How I ended up as a maintainer of an OSS project"/> <meta name="keywords" content="cloud-solutions-architect, cloud-architect, cloud-engineer, cloud-consultant"/> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"/> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto+Serif:300,400,500,700|Roboto+Slab:300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="none" id="highlight_theme_light"/> <link rel="shortcut icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>⚛️</text></svg>"> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="https://cmoralesmx.github.io/blog/2020/adopting-an-open-source-project/"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"/> <script src="/assets/js/theme.js"></script> <script src="/assets/js/dark_mode.js"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Carlos </span>A. Morales</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item"> <a class="nav-link" href="https://resume.cm-cloudarchitect.com" target="_blank" rel="noopener noreferrer">Resume </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Adopting an Open Source Software project</h1> <p class="post-meta">October 22, 2020</p> <p class="post-tags"> <a href="/blog/2020"> <i class="fas fa-calendar fa-sm"></i> 2020 </a>   ·   <a href="/blog/tag/code"> <i class="fas fa-hashtag fa-sm"></i> code</a>   </p> </header> <article class="post-content"> <p>A few days ago, I needed to produce some bar plots. However, the distribution of the data I was working with was much higher on one side of the plot while the other had very low numbers. Plus, on the end with lower frequencies, it was very hard to spot the differences between frequencies lower than 10.<br> My supervisors suggested splitting the vertical axis and skipping part of the larger bars to bring both ends of the higher and lower frequency bars closer together. The suggestion made sense but I was not sure how I was going to split those plots programmatically. Bear in mind, this was just a couple of days after starting using R for plotting.</p> <p>Alright, but, <em>why was I using R in the first place?</em></p> <p>Well, a few days earlier I was happily immersed in the Python stack for all my plotting needs. More specifically, I was using <a href="http://holoviews.org/" target="_blank" rel="noopener noreferrer">holoviews</a> with the bokeh back end. I found this solution was simplifying my analytics pipelines while making it easy to produce interactive graphs in the Jupyter lab. All was good! Until… My progress was stopped by a <a href="https://github.com/holoviz/holoviews/issues/3892" target="_blank" rel="noopener noreferrer">bug</a> with no known solution yet. This bug crashes the plotting application whenever an offset on the y-axis of the label is specified. Therefore, I needed to adapt. Firstly, I tried to work around it by changing to the matplotlib back end. The results were slightly better. At least something was being plot. Although, the error bars and labels were failing to align with their corresponding bars. And the plots produced looked a bit basic or dull.</p> <div class="row mt-3 mb-3"> <div class="col-sm-2"> </div> <div class="col-sm"> <img class="img-fluid rounded z-depth-1" src="/assets/img/2020-11-23-adopting-oss-project-1.png"> </div> <div class="col-sm-2"> </div> </div> <div class="caption"> Plotting with holoviews using the matplotlib backed with misaligned labels and error bars. </div> <p>Therefore, I went searching for alternatives. I was trying to avoid getting into the R programming language. From previous experiences, I felt this language a bit weird compared to what I am used to in Python. But given my current circumstances, I gave it another try. A couple of the packages available were able to produce plots more closely resembling what I needed, these were the core plotting functions and <code class="language-plaintext highlighter-rouge">ggplot2</code> with the last requiring the least involvement for producing more visually appealing plots than the former. The only feature missing was the splitting of the axis.</p> <div class="row mt-3 mb-3"> <div class="col-sm-2"> </div> <div class="col-sm"> <img class="img-fluid rounded z-depth-1" src="/assets/img/2020-11-23-adopting-oss-project-2.png"> </div> <div class="col-sm-2"> </div> </div> <div class="caption"> A similar plot using R with ggplot2. All the elements are correctly aligned. </div> <p>A few hours later, I stumbled upon the <code class="language-plaintext highlighter-rouge">gg.gap</code> package which was designed for doing this specific task on plots produced by the <code class="language-plaintext highlighter-rouge">ggplot2</code> package. I was getting closer to solving my need. Yet again, I found a bug. The <code class="language-plaintext highlighter-rouge">gg.gap</code> package was erroneously duplicating the subtitle and the footer of the plots and placing them inside the split it was correctly generating in the plot I was providing. After browsing for solutions, I found other users were having the same problem and the authors had been quiet about the project for a year or so. So, because this package got me the closest to the solution, I decided to try and solve the problem.</p> <p>To solve the problem I needed to understand the code, but for me, it was being a very difficult task. Yes, I was new-ish to R but the static analyser was calculating a cyclomatic complexity of 67 for the main function. That was not helping my case. Eventually, I had a good grasp of the code and was confident I could solve my problem. Yet, as I was familiarising with the code, I noticed adding features beyond the simple fix I needed would be less daunting after some refactoring. I decided to focus my efforts on applying Clean Code principles and following the <a href="https://style.tidyverse.org/" target="_blank" rel="noopener noreferrer">tidyverse style guide</a>.</p> <p>After a few days of work, version 1.0 was ready and it was time to make the package available via CRAN. To do so, I followed the next three guides,</p> <ul> <li><a href="https://tinyheero.github.io/jekyll/update/2015/07/26/making-your-first-R-package.html" target="_blank" rel="noopener noreferrer">Fong Chun Chan’s “Making Your First R Package”</a></li> <li><a href="http://hilaryparker.com/2014/04/29/writing-an-r-package-from-scratch/" target="_blank" rel="noopener noreferrer">Hilary Parker’s “Writing an R package from scratch”</a></li> <li><a href="http://r-pkgs.had.co.nz/" target="_blank" rel="noopener noreferrer">Hadley Wickham’s “R packages”</a></li> </ul> <p>Although I created the package manually, I found the process was not that hard thanks to those guides. (Yet, I had to fix a few errors in the package).</p> <p>Now, the package can be installed by issuing at the R prompt,</p> <div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">install.packages</span><span class="p">(</span><span class="s2">"gggap"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <p>Some examples of the package in action follow.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <img class="img-fluid rounded z-depth-1" src="/assets/img/2020-11-23-gggap_ex_1.png"> </div> <div class="col-sm mt-3 mt-md-0"> <img class="img-fluid rounded z-depth-1" src="/assets/img/2020-11-23-gggap_ex_2.png"> </div> </div> <div class="caption"> The original bar plot is on the left and the one produced by gggap on the right. </div> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <img class="img-fluid rounded z-depth-1" src="/assets/img/2020-11-23-gggap_ex_3.png"> </div> <div class="col-sm mt-3 mt-md-0"> <img class="img-fluid rounded z-depth-1" src="/assets/img/2020-11-23-gggap_ex_4.png"> </div> </div> <div class="caption"> The functionality of the gggap package is not limited to bar plots. Here, we see it in action with a faceted scatter plot. The original plot is on the left and the one produced by gggap on the right. </div> </article><div id="disqus_thread"></div> <script type="text/javascript">var disqus_shortname="think-code-cycle",disqus_identifier="/blog/2020/adopting-an-open-source-project",disqus_title="Adopting an Open Source Software project";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}();</script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript" target="_blank" rel="noopener noreferrer">comments powered by Disqus.</a> </noscript> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2022 Carlos A. Morales. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="/assets/js/common.js"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-CW7VDPN2T7"></script> <script>function gtag(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-CW7VDPN2T7");</script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>