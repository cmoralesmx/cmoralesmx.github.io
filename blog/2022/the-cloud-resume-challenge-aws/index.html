<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>The Cloud Resume Challenge, AWS | Carlos A. Morales</title> <meta name="author" content="Carlos A. Morales"/> <meta name="description" content="My experience completing the Cloud Resume Challenge in AWS"/> <meta name="keywords" content="cloud-solutions-architect, cloud-architect, cloud-engineer, cloud-consultant"/> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"/> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto+Serif:300,400,500,700|Roboto+Slab:300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="none" id="highlight_theme_light"/> <link rel="shortcut icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>⚛️</text></svg>"> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="https://cmoralesmx.github.io/blog/2022/the-cloud-resume-challenge-aws/"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"/> <script src="/assets/js/theme.js"></script> <script src="/assets/js/dark_mode.js"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Carlos </span>A. Morales</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item"> <a class="nav-link" href="https://resume.cm-cloudarchitect.com" target="_blank" rel="noopener noreferrer">Resume </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">The Cloud Resume Challenge, AWS</h1> <p class="post-meta">October 17, 2022</p> <p class="post-tags"> <a href="/blog/2022"> <i class="fas fa-calendar fa-sm"></i> 2022 </a>   ·   <a href="/blog/tag/cloud"> <i class="fas fa-hashtag fa-sm"></i> cloud,</a>   <a href="/blog/tag/aws"> <i class="fas fa-hashtag fa-sm"></i> aws</a>   </p> </header> <article class="post-content"> <p>I stumbled upon the <a href="https://cloudresumechallenge.dev/" target="_blank" rel="noopener noreferrer">Cloud Resume Challenge</a> while preparing for my first <code class="language-plaintext highlighter-rouge">AWS</code> certifications. However, I decided to prioritize and sit the examinations first before delving into this task.</p> <p>Once I achieved both the Solutions Architect and the Developer certifications, it was time to work on this.</p> <h2 id="what-is-the-cloud-resume-challenge">What is the Cloud Resume Challenge?</h2> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/2022-10-17-cloudresume-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/2022-10-17-cloudresume-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/2022-10-17-cloudresume-1400.webp"></source> <img src="/assets/img/2022-10-17-cloudresume.png" class="camg" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>It is an experience-building activity aimed at presenting your resume using cloud technologies. It seems simple, right? Well, not quite. You are required to complete the tasks following <strong>best practices</strong>, which makes for a more dense project. The challenge consists of <a href="https://cloudresumechallenge.dev/docs/the-challenge/aws/" target="_blank" rel="noopener noreferrer">sixteen steps</a> taking you through the learning journey of automating the full life cycle of a web application using cloud technologies. Of course, before reaching such automation, a manual process must already be in place.</p> <p>Thus, you first learn to manually deliver your application to the cloud, in this case, a static website. Then, you make it publicly available through a custom domain name. And the whole task is completed by setting up every service needed yourself. Cloud technologies have simplified and reduced the cost of implementing this type of comprehensive project compared to doing the same on your hardware. However, weak spots exist in this version of the process due to the high human involvement required.</p> <p>Fortunately, you can reduce those weaknesses by automating the manual process. So, you learn to do such automation. By doing that, you also gain experience in the <strong>best practices</strong> prevailing among cloud leaders. These allow them to quickly react to changes in user demand, to deliver software more often and with higher quality, and to anticipate and recover from failure faster. Thus, you have the chance to gain a solid set of skills.</p> <p>If done correctly, the challenge takes you from zero to fluent in the cloud ecosystem of your choice within a few weeks.</p> <h2 id="what-was-my-motivation-for-this-challenge">What was my motivation for this challenge?</h2> <p>Not long ago, I stumbled upon a blog post describing how <code class="language-plaintext highlighter-rouge">Amazon</code> evolved their practices and tools until they successfully coped with the unprecedented surge in demand they observed on their first Black Friday sales.</p> <p>The post in question was not a heavily-technical one providing a high-level overview of <code class="language-plaintext highlighter-rouge">AWS</code> and how their publicly available platform and knowledge base can power others to achieve similar features. Yet, this post solved many of the questions I had from my time in the industry.</p> <p>For better or worst, my professional path revolved around early-stage start-ups (one of which was my own), highly interested in delivering software quickly but still adamant about adopting modern development practices. Thus, I experienced developing and deploying applications following mostly manual methods, and similarly, when executing operational activities, all done with no automation. Usually, the manual execution led to failures and sometimes even delaying the projects.</p> <p>Thus, the post I mentioned gave me hope for a better way of doing software projects. That was exciting news! Therefore, I wanted to get involved as soon as possible. Yet, with no expertise or colleges working in this area, the chances of making this a reality looked grim.</p> <p>Fortunately, this changed when I learned about this challenge! It seemed like an opportunity to dive into this area and increase my familiarity with the tools and techniques. Thus, I decided to tackle this project and opted to do so in AWS and here you will read my experience doing so.</p> <h2 id="my-experience">My Experience</h2> <p>Tackling this project helped me realize the theoretical foundation gained preparing to sit the certifications was insufficient for this new task. But, I am always happy to learn new things and hone my skills.</p> <p>Nevertheless, I had to fulfil the prerequisites before getting involved with the challenge,</p> <h3 id="prerequisites">Prerequisites</h3> <p><em>The certification</em>, the challenge calls for the Cloud Practitioner certification, yet as I said earlier, I had already obtained the Solutions Architect and Developer certifications which I decided to use instead.</p> <p><em>The resume</em>, my resume needed to be a static website created only with internet-native technologies, such as <code class="language-plaintext highlighter-rouge">Hypertext Mark-up Language (HTML)</code> for the text and semantic content and <code class="language-plaintext highlighter-rouge">Cascading Style Sheets (CSS)</code> for the styling. Such a simple site may seem extremely basic, yet the technology stack needed for such a website is also greatly simplified. Given the complexity of the project I was about to tackle, this simplification was beneficial.</p> <p>To my advantage, I was already using a static site generator to produce a personal blog which hosted an academic version of my resume. Thus, I devised a strategy to reuse parts of that site instead of creating one from scratch. For this, I took the last version of my site and branched from there, isolating the relevant content for the resume while the parent branch preserved the rest. After a few tweaks on both versions, I had the single repository ready and set up to produce the two sites needed. Being honest, I was not totally pleased by having both sites using the same layout and graphic design, but this had to do.</p> <div class="row mt-5 justify-content-md-center"> <div class="col-6 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/2022-10-17-cmca-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/2022-10-17-cmca-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/2022-10-17-cmca-1400.webp"></source> <img src="/assets/img/2022-10-17-cmca.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-6 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/2022-10-17-resume-cmca-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/2022-10-17-resume-cmca-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/2022-10-17-resume-cmca-1400.webp"></source> <img src="/assets/img/2022-10-17-resume-cmca.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="row mt-3 mb-5"> <div class="col mt-md-0" style="text-align: center"> My former website, on the left, and the resume site, on the right. </div> </div> <p>I later added a second statically generated site acting as a landing page for my resume. I am providing further detail near the end of the post.</p> <p><em>Account setup</em>, I already had an <code class="language-plaintext highlighter-rouge">AWS</code> account, so I did not create a new one for the challenge. Yet, I <strong>must</strong> touch on the <strong>security considerations</strong> I followed.</p> <p>Firstly, I set up the <code class="language-plaintext highlighter-rouge">root account</code> with a secure password and <code class="language-plaintext highlighter-rouge">2FA</code>, two-factor authentication, which transforms the standard login into a two-step process and requires the account owner to approve each login attempt via a physical device.</p> <p>Secondly, I set up a <code class="language-plaintext highlighter-rouge">budget</code> with <code class="language-plaintext highlighter-rouge">billing and usage alerts</code>. This way, I would get prompt notification of unusual increases in usage.</p> <p>For the challenge, I created two pairs of <code class="language-plaintext highlighter-rouge">IAM users</code> and <code class="language-plaintext highlighter-rouge">roles</code> in this account, each for specific tasks. The first one for executing administrative duties on the <code class="language-plaintext highlighter-rouge">AWS console</code> without programmatic access. The second one for developer-related activities with programmatic access to a subset of services. I also set up the latter for usage in the <code class="language-plaintext highlighter-rouge">AWS CLI</code>, which I had available on my local system since before the challenge.</p> <p>Finally, I locked away the <code class="language-plaintext highlighter-rouge">root account</code>, which I did not use anymore during the project.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/2022-10-17-aws-signin-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/2022-10-17-aws-signin-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/2022-10-17-aws-signin-1400.webp"></source> <img src="/assets/img/2022-10-17-aws-signin.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>Securing a new or current account this way is <strong>crucial</strong> to prevent misuse, overcharges, and headaches. Plus, this is a first step towards the <code class="language-plaintext highlighter-rouge">principle of least privilege</code> which aims at reducing security exposure by providing just the right credentials for the activities to execute next.</p> <blockquote> <p>Please note this post does not include any code, and I do not provide a detailed recap of how I solved the most challenging bits. I decided this to prevent diluting the experience for others taking the challenge. All my code is available in a private repository in my GitHub account. I can provide access upon request for legitimate purposes.</p> </blockquote> <h2 id="stage-1-manual-labour">Stage 1, Manual labour</h2> <p>The first six steps of the challenge took me through the manual part of the process.</p> <p>I started by uploading the resume site to an <code class="language-plaintext highlighter-rouge">Amazon Simple Storage Service (S3)</code> <em>bucket</em> with public website hosting enabled. Doing so makes the website available via an <code class="language-plaintext highlighter-rouge">S3</code> website <em>endpoint</em>. Yet, the requirement calls for a custom domain name. Custom domain names must be set up with a <code class="language-plaintext highlighter-rouge">DNS</code> server, raising a new difficulty.</p> <p>Routing traffic from a <code class="language-plaintext highlighter-rouge">DNS</code> server directly to an <code class="language-plaintext highlighter-rouge">S3</code> bucket is impossible. Thus, I set up a <code class="language-plaintext highlighter-rouge">CloudFront</code> distribution, a <code class="language-plaintext highlighter-rouge">Content Delivery Network</code> providing fast access to your content from geographic regions distant from the physical location of the hardware hosting the website and acting as an intermediary between <code class="language-plaintext highlighter-rouge">Route53</code> and <code class="language-plaintext highlighter-rouge">S3</code>.</p> <p>Having my site hosted in the North-East region of the United States, any access from a different AWS region would face longer load times. Thankfully, the <code class="language-plaintext highlighter-rouge">CloudFront</code> distribution mitigated that by replicating the content to many servers to many servers across America and Europe. Thus, the website will load faster for anyone within these regions.</p> <p>And, just like that, the website was now live!</p> <p>Nevertheless, communication with a website should occur over an encrypted channel. This type of encryption requires a <code class="language-plaintext highlighter-rouge">Transport Layer Security (TLS)</code> certificate. In my case, <code class="language-plaintext highlighter-rouge">AWS Certificate Manager</code> produced the certificate for the website, and I only needed to set up <code class="language-plaintext highlighter-rouge">CloudFront</code> to use the certificate.</p> <p>Completing these activities would have been enough for a website hosted on the <code class="language-plaintext highlighter-rouge">AWS</code> public cloud with encryption enabled. Yet, there was a lot more ground to cover in the challenge.</p> <p>Usually, cloud applications interact with other services to improve the user experience. I needed to add a visitor counter and keep track of this number, meaning I needed to involve a programming language and a database. However, static site servers do not provide database access.</p> <p>I learnt about <code class="language-plaintext highlighter-rouge">DynamoDB</code>, a fully-featured <code class="language-plaintext highlighter-rouge">NoSQL</code> database for the cloud. This type of database differs from the formerly most common <code class="language-plaintext highlighter-rouge">SQL</code> or <code class="language-plaintext highlighter-rouge">relational</code> databases in several aspects, the most relevant of which is the way they store data and how they represent relationships.</p> <p>Regardless, accessing data from a database directly from the front end is not a good practice.</p> <p>I needed to implement a database-enabled back-end service, so the website could interact with it to store and retrieve data. Usually, this means setting up a database server and configuring your application to access the resource. From previous experience, I was aware these activities were not trivial.</p> <p>Luckily, <strong>serverless technologies</strong> abstract the details of building and running applications in the cloud. Thus, you can focus on implementing an application without worrying too much about the server side. Plus, in some cases, such as <code class="language-plaintext highlighter-rouge">AWS Lambda Functions</code>, they allow the application to be as minimal as a single function, which can have many benefits.</p> <p>But <code class="language-plaintext highlighter-rouge">AWS Lambda Functions</code> cannot operate autonomously to handle the current scenario. They need a directory and routing service to receive and process the external requests and invokes the correct function based on the parameters it receives. <code class="language-plaintext highlighter-rouge">API Gateway</code> is the service that does this in <code class="language-plaintext highlighter-rouge">AWS</code>.</p> <p>For implementing the functions enabling this interaction with <code class="language-plaintext highlighter-rouge">DynamoDB</code>, I took advantage of <code class="language-plaintext highlighter-rouge">boto3</code>, a <code class="language-plaintext highlighter-rouge">Python</code> framework from <code class="language-plaintext highlighter-rouge">AWS</code> exposing their services for easy consumption and integration. Doing so allowed me to easily and quickly complete the back-end application to enable the website to read and write data to and from the database.</p> <p>However, following best practices, I must have thoroughly tested the <code class="language-plaintext highlighter-rouge">Lambda functions</code> before release. Thus, I added unit test to make sure the code was working correctly. This testing should be executed routinely as the code base changes to check the functionality covered still works as expected. At this point in the challenge, I was manually executing these tests.</p> <p>After that, I set up <code class="language-plaintext highlighter-rouge">API Gateway</code> to invoke the <code class="language-plaintext highlighter-rouge">Lambda functions</code> in response to the requests coming from my website.</p> <p>And that was all the work needed for the first part. It was a long and winding process, but I had a working site hosted on the <code class="language-plaintext highlighter-rouge">AWS</code> cloud accessible via a custom domain name. Plus, I had certainty the code was working, and future changes that may break the functionality would not get released <strong>if and only if</strong> I were to run the tests before updating the public website.</p> <p>The infrastructure of my solution follows, providing a high-level overview of what services are involved and how they relate to each other.</p> <p> <br></p> <div class="row mt-3" style="text-align: center"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/2022-10-17-the-crc-stack-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/2022-10-17-the-crc-stack-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/2022-10-17-the-crc-stack-1400.webp"></source> <img src="/assets/img/2022-10-17-the-crc-stack.png" class="img-fluid rounded" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> The infrastructure for my solution to the challenge </div> </div> <p> <br></p> <p>The key takeaways for me from this first stage were,</p> <ol> <li>Securing and locking the <code class="language-plaintext highlighter-rouge">root account</code> is a <strong>MUST</strong>.</li> <li> <code class="language-plaintext highlighter-rouge">IAM</code> users for the win!</li> <li> <strong>NEVER</strong> embed credentials or secrets in code.</li> <li> <code class="language-plaintext highlighter-rouge">Origin-Access Identity</code> is a more secure way of hosting a website on <code class="language-plaintext highlighter-rouge">S3</code>.</li> <li>A standard <code class="language-plaintext highlighter-rouge">DNS</code> server cannot choose the best server to use per request based on specific rules, but other services, such as <code class="language-plaintext highlighter-rouge">CloudFront</code> can.</li> <li>A <code class="language-plaintext highlighter-rouge">CloudFront</code> distribution is a valid target for traffic from a <code class="language-plaintext highlighter-rouge">DNS</code> server, and it can take an <code class="language-plaintext highlighter-rouge">S3</code> bucket as its origin.</li> <li>Requests from <code class="language-plaintext highlighter-rouge">CloudFront</code> to <code class="language-plaintext highlighter-rouge">S3</code> are <code class="language-plaintext highlighter-rouge">HTTP</code>, not <code class="language-plaintext highlighter-rouge">HTTPS</code>. <code class="language-plaintext highlighter-rouge">Amazon S3</code> does not expose an <code class="language-plaintext highlighter-rouge">HTTPS</code> <em>endpoint</em>.</li> <li>In some scenarios, <code class="language-plaintext highlighter-rouge">Lambda</code> functions may need <code class="language-plaintext highlighter-rouge">CORS</code> headers.</li> <li>A <code class="language-plaintext highlighter-rouge">CloudFront</code> distribution allows specifying domain name aliases to enable access to the cached content via custom domain names.</li> <li>Always mind the delay between creating or updating a <code class="language-plaintext highlighter-rouge">CloudFront</code> distribution and the files being ready at the edge locations.</li> </ol> <p>Configuring all the services is a time-consuming activity, plus with so many details to set up, the surface of exposure is considerable. Let’s improve this.</p> <p> <br></p> <h2 id="stage-2-automation">Stage 2, Automation</h2> <p>To start this second part, I learnt to avoid manually configuring the <code class="language-plaintext highlighter-rouge">API</code> resources by leveraging the <code class="language-plaintext highlighter-rouge">AWS Serverless Application Model (SAM)</code> framework.</p> <p><code class="language-plaintext highlighter-rouge">AWS SAM</code> uses text-based templates to declare all the resources comprising a serverless application. These templates are part of a technology enabling the creation and provisioning of <code class="language-plaintext highlighter-rouge">AWS</code> infrastructure deployments predictably and repeatedly, also known as <code class="language-plaintext highlighter-rouge">Infrastructure as Code (IaC)</code>. <code class="language-plaintext highlighter-rouge">IaC</code> intends to treat infrastructure the same way developers treat code. Among others, <code class="language-plaintext highlighter-rouge">IaC</code> enables versioning of the source template to keep track of the changes to the infrastructure as the projects evolve. Thus, from this point, I started using the <code class="language-plaintext highlighter-rouge">Git</code> system for this project and <code class="language-plaintext highlighter-rouge">GitHub</code> to host the remote code repository.</p> <p>Now, that I was doing <code class="language-plaintext highlighter-rouge">IaC</code>, I was also executing part of the practices known as <code class="language-plaintext highlighter-rouge">DevOps</code>, short for development and operations. Other of these practices involve automating the integration and delivery pipeline. There are many tools available for these activities, such as <code class="language-plaintext highlighter-rouge">AWS CodePipeline</code>, or the more manual trio made of <code class="language-plaintext highlighter-rouge">AWS CodeCommit</code>, <code class="language-plaintext highlighter-rouge">AWS CodeBuild</code>, and <code class="language-plaintext highlighter-rouge">AWS CodeDeploy</code>, as well as non-AWS tools. I covered this part of the challenge using <code class="language-plaintext highlighter-rouge">GitHub Actions</code>. These are scripts running on <code class="language-plaintext highlighter-rouge">GitHub</code> servers and executing sequential tasks in response to code submissions. The <code class="language-plaintext highlighter-rouge">GitHub Actions</code> were responsible for running the unit tests and requiring all tests to pass before proceeding with the delivery of the <code class="language-plaintext highlighter-rouge">AWS SAM</code> template. Thus, this step added some certainty to my project in the remote case I submitted breaking changes.</p> <p>However, the <code class="language-plaintext highlighter-rouge">GitHub Actions</code> needed programmatic access to the <code class="language-plaintext highlighter-rouge">AWS</code> resources in my account to complete their execution. I enabled this by creating a set of credentials in <code class="language-plaintext highlighter-rouge">AWS IAM</code> with <strong>restricted authorization</strong> for the services required. Provisioning credentials requires careful consideration due to the inherent <strong>security implications</strong> involved. It may be easy to hardcode the credentials directly in the code. However, this is a highly unsafe decision even when working with private repositories and goes against best practices. The safer option, and my course of action, is to use <code class="language-plaintext highlighter-rouge">GitHub Actions secrets</code> to store this sensitive data in encrypted storage and request the values from within the <code class="language-plaintext highlighter-rouge">GitHub Actions</code>.</p> <p>For the next step, I focused my efforts on the front end. Thus, I created a second <code class="language-plaintext highlighter-rouge">GitHub</code> repository for the website and a new set of <code class="language-plaintext highlighter-rouge">GitHub Actions</code>. These <code class="language-plaintext highlighter-rouge">GitHub Actions</code> would synchronize the website files in <code class="language-plaintext highlighter-rouge">Amazon S3</code> whenever a new commit changed the statically generated site in <code class="language-plaintext highlighter-rouge">GitHub</code>. In this case, I added a second task to <em>invalidate</em> the files in the <code class="language-plaintext highlighter-rouge">CloudFront</code> distribution cache after each update forcing an update from the new files in <code class="language-plaintext highlighter-rouge">S3</code>. Not doing so could have undesired consequences for my website.</p> <p>At this point, I had almost completed the challenge. Yet, I was discontent with having my resume exposed directly without a landing page. So, I created a new version of the former landing page of my original static website and added another <code class="language-plaintext highlighter-rouge">GitHub Action</code> to the corresponding repository for publishing this landing page too.</p> <p>Finally, I had the resume published on a subdomain and the landing page on the top-level domain.</p> <blockquote> <p>This last step allowed me to experience more tools and techniques for hosting the website, distributing the content, monitoring, and cost optimizations beyond what the challenge required. More details are in the last section of the post.</p> </blockquote> <p>And, just like that, I was done with the challenge, well, almost. The final activity was to write a post about this experience. Thus, this post was born.</p> <p>The key takeaways for me from this second stage were,</p> <ol> <li> <code class="language-plaintext highlighter-rouge">AWS SAM</code> is a subset of <code class="language-plaintext highlighter-rouge">CloudFormation</code> and may be easier for some scenarios.</li> <li> <code class="language-plaintext highlighter-rouge">AWS SAM</code> and <code class="language-plaintext highlighter-rouge">CloudFormation</code> templates can directly deliver code to a target.</li> <li>It is possible to embed code in <code class="language-plaintext highlighter-rouge">SAM</code> and <code class="language-plaintext highlighter-rouge">CloudFormation</code> templates, but it is best to keep it short.</li> <li>Targeting remote services for <code class="language-plaintext highlighter-rouge">Unit Testing</code> can quickly elevate costs.</li> <li> <strong>Mocking</strong> services for testing prevents unnecessary delays and charges, among other things.</li> <li>I must aim for modular template designs that enable reuse.</li> <li>It is best to use <code class="language-plaintext highlighter-rouge">CloudFormation</code> template parameters instead of hard-coded values.</li> <li>Stringent rules in the <code class="language-plaintext highlighter-rouge">CI/CD</code> pipeline, such as enforced style checks, can help maintain code standards.</li> <li>Failing to specify an alternate <code class="language-plaintext highlighter-rouge">CNAME</code> in a <code class="language-plaintext highlighter-rouge">CloudFormation</code> distribution leads to <code class="language-plaintext highlighter-rouge">403 errors</code>.</li> <li>Newly created certificates involve a manual validation step unless you automate the process.</li> <li>Having <code class="language-plaintext highlighter-rouge">CloudFormation</code> generate new certificates without specifying a timeout for the template execution may lead to a never-ending process due to pt.10.</li> <li>Taking care of the template runs is also taking care of the operational cost!.</li> </ol> <p>The challenge is designed to provide sufficient experience to hit the ground running as a junior cloud engineer. However, given the wide spectrum of what is possible with cloud technologies, it is also possible to take the project as a starting point and execute further exploration according to your own interests.</p> <h2 id="going-beyond-the-requirements-of-the-challenge">Going beyond the requirements of the challenge</h2> <p>Given my interests and time constraints, I explored a couple of optimization strategies and a more secure way for hosting the static website. A brief of these follows,</p> <h3 id="a-more-secure-way-of-hosting-a-static-website-in-s3">A more secure way of hosting a static website in <code class="language-plaintext highlighter-rouge">S3</code> </h3> <p>I created an additional statically generated site to serve as the landing page for my resume. I also hosted this as a static site in <code class="language-plaintext highlighter-rouge">S3</code>, yet, instead of enabling <code class="language-plaintext highlighter-rouge">Static website hosting</code>, I set up an <code class="language-plaintext highlighter-rouge">Origin-Access Identity</code> in <code class="language-plaintext highlighter-rouge">CloudFront</code>. This feature enabled <code class="language-plaintext highlighter-rouge">CloudFront</code> to send authenticated requests to <code class="language-plaintext highlighter-rouge">Amazon S3</code> and set <code class="language-plaintext highlighter-rouge">S3</code> to allow access to authenticated requests from <code class="language-plaintext highlighter-rouge">CloudFront</code> only. This way, no <code class="language-plaintext highlighter-rouge">S3 website endpoint</code> is created either. Besides, this change also allowed me to explore using subdomains in <code class="language-plaintext highlighter-rouge">Route53</code> to expose the resume site while preserving the top-level domain for the landing page.</p> <h3 id="using-subdomain-specific-tls-certificates-in-cloudfront">Using subdomain-specific <code class="language-plaintext highlighter-rouge">TLS</code> certificates in <code class="language-plaintext highlighter-rouge">CloudFront</code> </h3> <p><code class="language-plaintext highlighter-rouge">TLS</code> certificates encode information about the domain name they are validating, and they cannot change once they are issued. You must create a new certificate whenever changes are needed, such as updating some of its information. Thus, I needed to identify the simplest and most cost-effective option for updating the certificate that would better fit my scenario. For this, I also needed to consider each new certificate involves a manual authorization step in Route53.</p> <p>I decided to use two certificates instead of only one. I linked the first certificate to the top-level domain and the second to the subdomains. This option was also a good fit for the independent CI/CD pipelines producing the static sites and the infrastructure of my solution.</p> <div class="row mt-3 mb-5" style="text-align: center"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/2022-10-17-tls-certs-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/2022-10-17-tls-certs-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/2022-10-17-tls-certs-1400.webp"></source> <img src="/assets/img/2022-10-17-tls-certs.png" class="img-fluid rounded" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> Information about both certificates side by side </div> </div> <h3 id="optimizing-operational-costs">Optimizing operational costs</h3> <p>As the project evolved, I continuously did access and cost assessments to identify opportunities for optimization. Doing so was key after one of the last updates, where I introduced new templates for both static sites. The new templates increased the footprint of the static sites quite sharply, which triggered the alerts I set up.</p> <p>After assessing the situation and identifying the culprits, I implemented a cost-reduction strategy via offloading resources to third-party CDNs and asset optimization.</p> <p>Thus, achieving a reduction of the operational cost by 50%</p> <div class="row mt-3 mb-3" style="text-align: center"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/2022-10-17-cost-1-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/2022-10-17-cost-1-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/2022-10-17-cost-1-1400.webp"></source> <img src="/assets/img/2022-10-17-cost-1.png" class="img-fluid rounded" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> The landing page website file size before and after optimizations </div> </div> <div class="row mt-3 mb-3" style="text-align: center"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/2022-10-17-cost-2-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/2022-10-17-cost-2-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/2022-10-17-cost-2-1400.webp"></source> <img src="/assets/img/2022-10-17-cost-2.png" class="img-fluid rounded" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> The resume website file size before and after optimizations </div> </div> <h2 id="closing-words">Closing words</h2> <p>Implementing the manual process was good as a learning exercise but distant from the best practices for cloud solutions. Applying <code class="language-plaintext highlighter-rouge">IaC</code> is not extremely difficult, and the gains far outweigh not doing so.</p> <p>Automated infrastructure provisioning is the way of the cloud.</p> <div class="row mt-3" style="text-align: center"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/2022-10-17-aws-banner-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/2022-10-17-aws-banner-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/2022-10-17-aws-banner-1400.webp"></source> <img src="/assets/img/2022-10-17-aws-banner.png" class="img-fluid rounded" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> </article><div id="disqus_thread"></div> <script type="text/javascript">var disqus_shortname="think-code-cycle",disqus_identifier="/blog/2022/the-cloud-resume-challenge-aws",disqus_title="The Cloud Resume Challenge, AWS";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}();</script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript" target="_blank" rel="noopener noreferrer">comments powered by Disqus.</a> </noscript> <div class="social"> <div class="contact-icons"> <a href="mailto:%63%61%72%6C%6F%73%6D%6F%72%61%6C%65%73%37%37%37@%67%6D%61%69%6C.%63%6F%6D" title="email"><i class="fas fa-envelope"></i></a> <a href="https://github.com/cmoralesmx" title="GitHub" target="_blank" rel="noopener noreferrer"><i class="fab fa-github"></i></a> <a href="https://www.linkedin.com/in/cm-cloudengineer" title="LinkedIn" target="_blank" rel="noopener noreferrer"><i class="fab fa-linkedin"></i></a> <a href="https://twitter.com/mrdatamx" title="Twitter" target="_blank" rel="noopener noreferrer"><i class="fab fa-twitter"></i></a> <a href="https://gitlab.com/cmoralesmx" title="GitLab" target="_blank" rel="noopener noreferrer"><i class="fab fa-gitlab"></i></a> <a href="https://instagram.com/carl_shutuplegs" title="Instagram" target="_blank" rel="noopener noreferrer"><i class="fab fa-instagram"></i></a> </div> <div class="contact-note"> My prefered way of contact is via email but feel free to use any of these </div> </div> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2022 Carlos A. Morales. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="/assets/js/common.js"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-CW7VDPN2T7"></script> <script>function gtag(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-CW7VDPN2T7");</script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>